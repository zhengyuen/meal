import{u as F,b as H,d as R,r as p,e as N,k as T,f as j,o as u,c as d,a as e,t as m,F as v,g as h,i as w,l as z,v as E,m as G,h as f,w as y,n as x,p as k}from"./index-CiFnpk3Y.js";const L={class:"font-bold text-lg ml-1"},M={class:"mx-auto"},U=["src"],A={class:"mb-5 px-3"},J=e("h1",{class:"font-bold"},"溫度",-1),K={class:"text-center mb-5"},O=e("h1",{class:"font-bold"},"甜度",-1),Q={class:"text-center mb-5"},W={key:0,class:"mb-5 px-3"},X=e("h1",{class:"font-bold"},"備餐方式",-1),Y={class:"text-center mb-5"},Z={key:1,class:"font-bold mb-3 px-3"},ee=e("hr",null,null,-1),te={class:"px-2"},se={class:"my-5"},ae={class:"w-[112px] my-5 bg-lightGray text-black"},le={__name:"index",setup(re){const P=F(),g=H(),o=R(),_=p(Number(g.params.id)),a=p(Number(g.params.storeId)),b=N(()=>o.stores.find(i=>i.id===a.value)),r=N(()=>b.value.products.find(i=>i.id===_.value));p(o.cart||[]);const I=()=>{P.push(`/store/${a.value}/products`)},n=p(1),V=()=>{n.value+=1},$=()=>{n.value>1&&(n.value-=1)},s=T({temperature:"正常冰",sweetness:"正常糖",mealPreparation:"熱-到做"}),S=["正常冰","少冰","去冰","常溫","溫","熱"],q=["正常糖","七分糖","半糖","三分糖","無糖"],B=["熱-到做","熱-先做","常溫餅","內用"],D=()=>{if(o.cart[a.value])if(o.cart[a.value].some(l=>l.id===_.value&&l.sweetness===s.sweetness&&l.temperature===s.temperature&&l.mealPreparation===s.mealPreparation)){const l=o.cart[a.value].find(c=>c.id===_.value&&c.sweetness===s.sweetness&&c.temperature===s.temperature&&c.mealPreparation===s.mealPreparation);l.quantity+=1}else o.setCart({...o.cart,[a.value]:[...o.cart[a.value],{...r.value,storeId:a.value,quantity:n.value,storeName:b.value.name,temperature:s.temperature,sweetness:s.sweetness,mealPreparation:s.mealPreparation}]});else o.setCart({...o.cart,[a.value]:[{...r.value,storeId:a.value,quantity:n.value,storeName:b.value.name,temperature:s.temperature,sweetness:s.sweetness,mealPreparation:s.mealPreparation}]});P.push(`/store/${a.value}/products`),G.success("已加入購物車")};return(i,l)=>{const c=j("a-button");return u(),d(v,null,[e("header",{class:"pl-2"},[e("i",{class:"fa-solid fa-chevron-left",onClick:I})]),e("h1",L,m(r.value.name),1),e("div",M,[e("img",{src:r.value.image,alt:"image",class:"h-1/2 mx-auto"},null,8,U)]),e("div",A,[r.value.category!=="找鹹的"&&r.value.category!=="找甜的"&&r.value.category!=="炸物點心"?(u(),d(v,{key:0},[J,e("div",K,[(u(),d(v,null,h(S,t=>f(c,{colorPrimaryHover:i.none,key:t,value:t,onClick:C=>s.temperature=t,class:k([["mr-2 last:mr-0",{"border-2 border-brown border-solid":t===s.temperature}],"mr-3 mt-3 w-20"])},{default:y(()=>[x(m(t),1)]),_:2},1032,["colorPrimaryHover","value","onClick","class"])),64))]),O,e("div",Q,[(u(),d(v,null,h(q,t=>f(c,{key:t,value:t,onClick:C=>s.sweetness=t,class:k([["mr-2 last:mr-0",{"border-2 border-brown border-solid":t===s.sweetness}],"mr-3 mt-3 w-20"])},{default:y(()=>[x(m(t),1)]),_:2},1032,["value","onClick","class"])),64))])],64)):w("",!0)]),r.value.category==="找鹹的"||r.value.category==="找甜的"?(u(),d("div",W,[X,e("div",Y,[(u(),d(v,null,h(B,t=>f(c,{key:t,value:t,onClick:C=>s.mealPreparation=t,class:k([["mr-2 last:mr-0",{"border-2 border-brown border-solid":t===s.mealPreparation}],"mr-3 mt-3 w-20"])},{default:y(()=>[x(m(t),1)]),_:2},1032,["value","onClick","class"])),64))])])):w("",!0),r.value.category==="炸物點心"?(u(),d("h1",Z,"此商品不需調整比例")):w("",!0),ee,e("div",te,[e("h1",se,"總金額："+m(n.value*r.value.price)+" 元",1),e("div",ae,[e("button",{class:"rounded-l-md w-6",onClick:$},"-"),z(e("input",{type:"text",class:"w-16 text-center","onUpdate:modelValue":l[0]||(l[0]=t=>n.value=t)},null,512),[[E,n.value]]),e("button",{class:"rounded-r-md w-6",onClick:V},"+")]),e("div",{class:"bg-brown h-10 text-white flex my-5 justify-center rounded-md px-5 mb-10"},[e("button",{onClick:D},"加入購物車")])])],64)}}};export{le as default};
