import{q,d as S,e as v,u as I,b as j,s as B,r as D,o as d,c as x,a as t,p as n,t as c,F as _,g as N,x as Q,i as f}from"./index-CiFnpk3Y.js";const F={class:"flex flex-col min-h-screen"},R=["src"],T=["onClick"],V={class:"text-slate-400"},z={class:"text-slate-400 ml-1"},E={key:1,class:"text-slate-400"},L={class:"absolute right-12"},U=["onClick"],A=["value"],G=["onClick"],H=["onClick"],J=t("i",{class:"fa-regular fa-trash-can text-sm"},null,-1),K=[J],M={class:"bg-brown text-white rounded-lg text-center w-1/4 text-md h-10"},X={__name:"index",setup(O){const{t:w}=q(),l=S(),p=v(()=>l.cart||[]),y=I(),k=j(),m=B(),r=v(()=>m.isDarkTheme),o=D(Number(k.params.storeId)),h=s=>{y.push(s)},C=v(()=>{let s=0;for(const a of l.cart[o.value])s+=a.price*a.quantity;return s}),$=()=>{let s=0;for(const a of l.cart[o.value])s+=a.quantity;return s},g=(s,a)=>{l.cart[o.value].filter(e=>e.id===s),l.cart[o.value].filter(e=>e.id===s).map(e=>{if((e.quantity>1||a>0)&&(e.quantity+=a),e.quantity===1&&a<0)return e="",e})},P=(s,a,e,b)=>{const u=l.cart[o.value].filter(i=>i.id!==s||i.id===s&&i.temperature!==a||i.id===s&&i.sweetness!==e||i.id===s&&i.mealPreparation!==b);return l.cart[o.value]=u,l.cart};return(s,a)=>(d(),x(_,null,[t("header",null,[t("i",{class:"fa-solid fa-chevron-left mx-2",onClick:a[0]||(a[0]=e=>h("/cart"))})]),t("div",F,[t("div",{class:n(["flex-1 bg-slate-200",{"!bg-black text-white":r.value}])},[t("p",{class:n(["my-2 text-black",{"text-white":r.value}])},"全部 "+c($())+" 筆",3),(d(!0),x(_,null,N(p.value[o.value],(e,b)=>(d(),x("div",{class:n(["flex items-center shadow-md my-3 py-2 rounded-lg bg-white mx-2",{"!bg-black text-white border-2 border-white border-solid":r.value}]),key:b},[t("img",{src:e.image,alt:"image",class:n(["h-20 relative",{"rounded-full mx-2 h-20 w-20 object-cover":r.value}])},null,10,R),t("div",{onClick:u=>h(`/store/${o.value}/product/${e.id}`)},[t("p",{class:n(["font-bold text-xl text-black",{"text-white":r.value}])},c(e.name),3),t("p",{class:n(["font-bold text-xl text-black",{"text-white":r.value}])},"$ "+c(e.price),3),e.category!=="找鹹的"&&e.category!=="找甜的"&&e.category!=="炸物點心"?(d(),x(_,{key:0},[t("span",V,c(e.temperature),1),t("span",z,c(e.sweetness),1)],64)):f("",!0),e.category==="找鹹的"||e.category==="找甜的"?(d(),x("span",E,c(e.mealPreparation),1)):f("",!0)],8,T),t("div",L,[t("button",{class:"rounded-l-md w-6 text-white bg-brown",onClick:u=>g(e.id,-1)},"-",8,U),t("input",{type:"text",class:"w-10 text-center text-black",value:e.quantity},null,8,A),t("button",{class:"rounded-r-md w-6 text-white bg-brown",onClick:u=>g(e.id,1)},"+",8,G)]),t("div",{class:"cursor-pointer absolute right-6",onClick:u=>P(e.id,e.temperature,e.sweetness,e.mealPreparation)},K,8,H)],2))),128)),t("div",{class:n(["flex items-center shadow-md my-3 py-2 justify-between px-7 mx-2 rounded-lg bg-white",{"!bg-black text-white border-2 border-white border-solid":r.value}])},[t("p",{class:n(["text-lg font-bold text-black",{"text-white":r.value}])},"合計：$ "+c(C.value),3),t("div",M,[t("button",{onClick:a[1]||(a[1]=e=>h(`/order/storeId/${o.value}`)),class:"pt-2"},c(Q(w)("go_pay")),1)])],2)],2)])],64))}};export{X as default};
